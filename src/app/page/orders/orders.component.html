<!--
<div class="header is-center">
  <p>Orders and items (you can add a new one or make a payment on the order)</p>
</div>
-->
<div class="content">
  <div class="container-fluid">
    <div class="row justify-content-md-center mb-3">
      <h2>Orders</h2>
      <app-dialog-order-create></app-dialog-order-create>

      <table class="pure-table pure-table-horizontal">
      <thead>
        <tr>
          <th rowspan="2" class="align-middle text-center">Order No#</th>
          <th rowspan="2" class="align-middle text-center">Date</th>
          <th rowspan="2" class="align-middle text-center">Customer</th>
          <th colspan="2" class="align-middle text-center">Invoices</th>
          <th colspan="8" class="align-middle text-center">Items</th>
        </tr>
        <tr>
          <th class="align-middle text-center">No#</th>
          <th class="align-middle text-center">Date</th>
          <th class="align-middle text-center">Seller</th>
          <th class="align-middle text-center">SKU</th>
          <th class="align-middle text-center">price</th>
          <th class="align-middle text-center">qty</th>
          <th class="align-middle text-center">total shipping</th>
          <th class="align-middle text-center">total price</th>
          <th class="align-middle text-center">total fee</th>
          <th class="align-middle text-center">status</th>
        </tr>
      </thead>
        <tbody>
          <tr *ngFor="let order of model.orders">
            <td class="text-center align-middle">
              <span>{{order.id}}</span>
              <div class="btn-group-vertical btn-group-sm" role="group">
                <button class="btn btn-primary"
                        *ngIf="order.isNoPaid"
                        (click)="model.toPay(order, 'RP')"
                        type="button">pay RP</button>
                <button class="btn btn-primary"
                        *ngIf="order.isNoPaid"
                        (click)="model.toPay(order, 'PT')"
                        type="button">pay PT</button>
                <button class="btn btn-success"
                        *ngIf="!order.isNoPaid"
                        disabled
                        type="button">invoice</button>
              </div>
            </td>
            <td>{{order.createdAt | date : 'yy/M/d h:mm:ss'}}</td>
            <td>{{order.customerName}}</td>
            <td colspan="2" class="align-middle text-center"></td>
            <td colspan="8" style="padding: 0" class="align-middle text-center">
              <app-order-items-table
                [isNested]="true"
                [data]="order"></app-order-items-table>
            </td>
          </tr>
          <tr *ngIf="model.orders.length === 0">
            <td colspan="14"
                class="align-middle text-center">empty</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
